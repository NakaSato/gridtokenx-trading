# E2E Test Configuration
# Copy this file to .env.e2e and update with your environment values

# ============================================================================
# TRADING UI Configuration
# ============================================================================

# Trading UI Base URL (where Playwright will connect)
UI_URL=http://localhost:3000

# Trading UI Port
TRADING_PORT=3000

# ============================================================================
# API Gateway Configuration
# ============================================================================

# API Gateway Base URL (for API calls in tests)
API_URL=http://localhost:4000

# API Gateway Port
APIGATEWAY_PORT=4000

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection string (used by test setup/teardown)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/gridtokenx_test

# ============================================================================
# Solana Configuration
# ============================================================================

# Solana RPC URL (testnet or local validator)
SOLANA_RPC_URL=http://localhost:8899

# Solana Network (localnet, devnet, or testnet)
SOLANA_NETWORK=localnet

# Solana Program IDs (if using different deployments)
# PROGRAM_ID_ENERGY_TOKEN=...
# PROGRAM_ID_TRADING=...

# ============================================================================
# Authentication Configuration
# ============================================================================

# Next.js Auth Secret (for local testing)
NEXTAUTH_SECRET=test-secret-key-change-in-production

# Auth URL
NEXTAUTH_URL=http://localhost:3000

# ============================================================================
# Playwright Configuration
# ============================================================================

# Browser to use for tests (chromium, firefox, webkit)
PLAYWRIGHT_BROWSER=chromium

# Number of parallel test workers
PLAYWRIGHT_WORKERS=1

# Test timeout in milliseconds (default: 30000)
PLAYWRIGHT_TIMEOUT=30000

# Trace recording on failures (on, off, retain-on-failure)
PLAYWRIGHT_TRACE=retain-on-failure

# Take screenshot on test failure
PLAYWRIGHT_SCREENSHOT=only

# Record video on test failure
PLAYWRIGHT_VIDEO=retain-on-failure

# ============================================================================
# Testing Configuration
# ============================================================================

# Enable debug logging
DEBUG=true

# Test environment
NODE_ENV=test

# Skip service availability checks
SKIP_SERVICE_CHECK=false

# Retry failed tests (used in CI)
RETRY_FAILED_TESTS=0

# ============================================================================
# E2E Test Specific Settings
# ============================================================================

# Test user credentials (all with same password for simplicity)
TEST_USER_PASSWORD=StrongP@ssw0rd!

# API timeout for tests (in milliseconds)
API_TIMEOUT=10000

# Page navigation timeout (in milliseconds)
NAVIGATION_TIMEOUT=10000

# Network idle timeout (in milliseconds)
NETWORK_IDLE_TIMEOUT=5000

# Maximum retries for flaky operations
MAX_RETRIES=3

# Delay between retries (in milliseconds)
RETRY_DELAY=1000

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Enable detailed test logging
TEST_LOG_DETAILED=false

# Save test logs to file
SAVE_TEST_LOGS=false

# Log directory
LOG_DIR=./logs

# ============================================================================
# Performance Configuration
# ============================================================================

# Slow motion mode (add delay between actions in ms, 0 to disable)
SLOW_MOTION=0

# Enable performance monitoring
ENABLE_PERF_MONITORING=false

# ============================================================================
# CI/CD Configuration (uncomment for CI environments)
# ============================================================================

# CI=true
# CI_COMMIT_SHA=
# CI_COMMIT_REF_NAME=
# CI_JOB_ID=
# CI_PIPELINE_ID=

# ============================================================================
# Notes
# ============================================================================
# 
# 1. Database Setup:
#    - Ensure PostgreSQL is running
#    - Create test database: createdb gridtokenx_test
#    - Run migrations: cargo sqlx migrate run
#
# 2. Services Required:
#    - Trading UI: npm run dev (or next dev --turbopack)
#    - API Gateway: cargo run
#    - Database: PostgreSQL running
#    - Solana: solana-test-validator (if using local blockchain)
#
# 3. For Local Testing:
#    - Use localhost URLs as shown above
#    - Create a .env.e2e file from this template
#    - Update values for your environment
#
# 4. For CI/CD:
#    - Set environment variables in your CI/CD system
#    - Use Docker services for database and validator
#    - See github-actions example in E2E_TESTING_GUIDE.md
#
# 5. Troubleshooting:
#    - Check service URLs are accessible: curl http://localhost:3000
#    - Verify database connection: psql $DATABASE_URL -c "SELECT 1;"
#    - Enable DEBUG=true for verbose logging
#    - Check playwright-report/index.html for test results
#
